
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>swpd.me</title>
	<meta name="author" content="swpd">

	
	<meta name="description" content="We celebrated for the Mid Autumn Festival last week, it is one of the most
important festival in China. People spent time fooling around with &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="swpd.me" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">swpd.me</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:swpd.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/swpdtz" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/swpd" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:swpd.github.io">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/09/22/gsoc-status-week-14/">
		
			GSoC Status: Week 14</a>
	</h2>
	<div class="entry-content">
		<p><img src="/images/blog/moon.jpg"></p>

<p>We celebrated for the Mid Autumn Festival last week, it is one of the most
important festival in China. People spent time fooling around with friends to
enjoy the full moon and taste some delicious mooncakes, so did I. I can never
resist the temptation of a cup of tea along with a piece of mooncake, yummy!</p>

<p>At the same time, the hooks section of the internal blog was finished, it is still
not good enough and I will keep polishing it.</p>

<p>For the next week I will still spend my time on the unfinished blog and complete
the final evaluation of GSoC 2013.</p>


		
		<a href="/blog/2013/09/22/gsoc-status-week-14/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-09-22T10:30:00+08:00" pubdate data-updated="true">Sep 22<span>nd</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>GSoC</a>, <a class='category' href='/blog/categories/monkey/'>Monkey</a>, <a class='category' href='/blog/categories/weekly-status/'>Weekly Status</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/09/16/gsoc-status-week-13/">
		
			GSoC Status: Week 13</a>
	</h2>
	<div class="entry-content">
		<p><img src="/images/blog/writing.jpg"></p>

<p>This week I made some minor improvments to the Duda MariaDB package in order to
shutdown client socket correctly if the database connection closes unexpectedly.
Pagination had been added to the demo web services of both packages to make the
examples more complete.</p>

<p>Meanwhile, the adventure of Monkey internals continued and I had finished two
more sections of the blog (Scheduler and Clock), as I promised last week. If you
find this interesting or want to make some contribution, please don&rsquo;t hesitate
to write me emails :&ndash;).</p>

<p>For the next week, the packages will start to be merged into the source base of
duda, I will keep my eyes on that. Also, I will prepare for the hard &lsquo;pencil down&rsquo;
date, though no big changes will happen to the code bases, there might be room
for tiny improvments. Last but not least, I will carry on with the internal blog,
two more sections are expected to be finished by the end of next week.</p>


		
		<a href="/blog/2013/09/16/gsoc-status-week-13/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-09-16T09:14:00+08:00" pubdate data-updated="true">Sep 16<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>GSoC</a>, <a class='category' href='/blog/categories/monkey/'>Monkey</a>, <a class='category' href='/blog/categories/weekly-status/'>Weekly Status</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/09/08/gsoc-status-week-11-12/">
		
			GSoC Status: Week 11-12</a>
	</h2>
	<div class="entry-content">
		<p><img src="/images/blog/home.jpg">
In the first half of week 11, I spent most of my time completing the documentation
of the PostgreSQL package. You may check it out <a href="https://github.com/swpd/duda_postgresql">here</a>.
Bugs and typos were fixed for that package as well.</p>

<p>After that I travelled back home to take a short break and stay with my dear family.
For this reason week 12 was mostly occupied by family and friends. It is always
comfortable and enjoyable when you can kick back and talk about your recent status
with them!</p>

<p>Before I went home, I intended to make some fixes and continue the blog post with
the working box in my apartment via VPN. Unfortunately it didn&rsquo;t work out and all
I got at home was a pretty old machine which can hardly open more than 4 tabs
when browsing web. That&rsquo;s why this post came late.</p>

<p>For next week I will be improving the codebases, both bug fixing and documentation
polishing, as the final evaluation is coming. And two more sections of the internal
blog will be accomplished.</p>


		
		<a href="/blog/2013/09/08/gsoc-status-week-11-12/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-09-08T10:37:00+08:00" pubdate data-updated="true">Sep 8<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>GSoC</a>, <a class='category' href='/blog/categories/monkey/'>Monkey</a>, <a class='category' href='/blog/categories/weekly-status/'>Weekly Status</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/08/26/gsoc-status-week-10/">
		
			GSoC Status: Week 10</a>
	</h2>
	<div class="entry-content">
		<p><img src="/images/blog/war_elephant.jpg">
This week the PostgreSQL package was completed, connection pooling support was
successfully added. Meanwhile, the sibling functions that are used for querying
and escaping string was also introduced into the package to provide more choice
for the user.</p>

<p>In order to demonstrate the usage of the PostgreSQL package, I have created
another duda web service <a href="https://github.com/swpd/duda_postgresql_demo">duda_postgresql_demo</a>
on Github, if you ever used the mariadb_demo web service, you&rsquo;ll find it pretty
similar. Check it out for your interest.</p>

<p>From now on till the end of GSoC I will test the two packages I am in charge of
and fix some potential bugs to make them more stable. The documentation of
PostgreSQL package will be completed in no time. Last but not least, I shall
continue the <a href="http://swpd.github.io/blog/2013/05/18/monkey-http-daemon-internals/">blog</a>
about Monkey internals that I haven&rsquo;t finished yet.</p>


		
		<a href="/blog/2013/08/26/gsoc-status-week-10/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-08-26T12:04:00+08:00" pubdate data-updated="true">Aug 26<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>GSoC</a>, <a class='category' href='/blog/categories/monkey/'>Monkey</a>, <a class='category' href='/blog/categories/weekly-status/'>Weekly Status</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/08/18/gsoc-status-week-9/">
		
			GSoC Status: Week 9</a>
	</h2>
	<div class="entry-content">
		<p><img src="/images/blog/serious_elephant.jpg">
This week I am happy to announce the basic PostgreSQL package can pass the build
process and integrate with Monkey. The asynchronous query handling have been added
to the package and serveral bugs got fixed. I wrote some tests to make sure it really
worked out. You may want to have a look at the <a href="https://github.com/swpd/duda_postgresql">package</a>.</p>

<p>Another stuff worth to mention about is I got a bug report for my MariaDB package
(thanks to <code>C1H1O3</code> on the irc), it is a good sign that someone is evaluating and
testing the package because that will make it more stable and robust.</p>

<p>I tried to reproduce the bug and traced the code with <code>gdb</code>, after several tests
I figured out the MariaDB package seemed to work properly. I wondered it might be
a bug from the Duda framework so I set up another tests without using MariaDB
package and could still reproduce the bug. It turned out to be a bug hidden in
Duda and I have reported it on the irc, <code>edsiper</code> will take care of it and I will
see what I can help.</p>

<p>C1H1O3 also advised me to use configuration file for connection pool parameters,
which seems like a good idea as we don&rsquo;t need to rebuild the application if all
we need is just to change the parameters.</p>

<p>Here are some tasks I will be hanlding for the next week:
* add connection pooling support to the PostgreSQL package
* as there are often more than one function to do the same thing in PostgreSQL
client libray <code>libpq</code>, I will add the sibling functions to the APIs of package to
make it more flexible.</p>


		
		<a href="/blog/2013/08/18/gsoc-status-week-9/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-08-18T19:16:00+08:00" pubdate data-updated="true">Aug 18<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>GSoC</a>, <a class='category' href='/blog/categories/monkey/'>Monkey</a>, <a class='category' href='/blog/categories/weekly-status/'>Weekly Status</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/08/12/gsoc-status-week-8/">
		
			GSoC Status: Week 8</a>
	</h2>
	<div class="entry-content">
		<p><img src="/images/blog/fat_elephant.jpg">
This week the draft APIs of PostgreSQL package has come out. You may check it out
on my <a href="https://github.com/swpd/duda_postgresql">Github</a>, feel free to leave me a
comment.</p>

<p>The APIs are modeled after the previous <a href="https://github.com/swpd/duda_mariadb">MariaDB</a>
package. By doing so we can hide the differences between MariaDB and PostgreSQL
from our users and let the packages deal with the details.</p>

<p>The asynchronous APIs of PostgreSQL provide a more flexible way to issue non-blocking
connection and query, for example you can use a string array to specify the connection
options you are interested and leave others as default. Currently I am working on
integraing the APIs with the event handling module of Duda.</p>

<p>Next week I will mainly focus on the asynchronous handling implementation of the
PostgreSQL package.</p>


		
		<a href="/blog/2013/08/12/gsoc-status-week-8/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-08-12T08:59:00+08:00" pubdate data-updated="true">Aug 12<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>GSoC</a>, <a class='category' href='/blog/categories/monkey/'>Monkey</a>, <a class='category' href='/blog/categories/weekly-status/'>Weekly Status</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/08/03/gsoc-status-week-7/">
		
			GSoC Status: Week 7</a>
	</h2>
	<div class="entry-content">
		<p><img src="/images/blog/monkey_and_elephant.jpg">
This week my effort was mainly focused on developing a web service to demonstrate
usage of the MariaDB package and completing the documentation. You may check it
out <a href="https://github.com/swpd/duda_mariadb_demo">here</a>.</p>

<p>I was also getting myself familiar with the C library APIs of PostgreSQL, the
community comes with comprehensive and clear documentation. For the next couple
days, the documentation website will undoubtedly be my most visited. What&rsquo;s more,
the library comes with native non-blocking support. It rocks, elephant!</p>

<p>This morning I also got an email from Google that announced my successfully pass
of the midterm evaluation. It is an amazing moment and I would like to share with
those that ever helped and guided me.</p>

<p>For the next week, I will get my hands dirty in the Duda PostgreSQL package by
designing the basic data structures and function prototypes.</p>


		
		<a href="/blog/2013/08/03/gsoc-status-week-7/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-08-03T20:32:00+08:00" pubdate data-updated="true">Aug 3<span>rd</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>GSoC</a>, <a class='category' href='/blog/categories/monkey/'>Monkey</a>, <a class='category' href='/blog/categories/weekly-status/'>Weekly Status</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/07/28/gsoc-status-week-6/">
		
			GSoC Status: Week 6</a>
	</h2>
	<div class="entry-content">
		<p><img src="/images/blog/seal_wins.jpg">
This week the Duda MariaDB package was completed. I spent some time on reimplementing
the connection pooling due to my misunderstanding of it. The new version maintain
a pool of connections that are either connected or connecting. And a pool is
associated with a web service instead of a thread. The pool shall be defined as
global in the web service, but due to the lack of isolate namespace there can&rsquo;t
be same pool names in differenct web services.</p>

<p>The documentation of MariaDB package was also updated to explain the usage of it.
And for those who want to install this package, please refer to the <a href="https://github.com/swpd/monkey">Monkey fork</a>
of my Github. Clone that repo and checkout to mariadb branch, environment needed
to build this package is set up for you. (Notice: you need <code>cmake</code> and <code>libaio</code>
to make things work, so don&rsquo;t forget to install them.) More information can be
found <a href="https://github.com/swpd/duda_mariadb/blob/master/README.md">here</a>.</p>

<p>Currently I am working on an example to demonstrate the usage of this package. It
will be finished very soon.</p>

<p>For next week I will make some potential improvemnts to MariaDB package, start
to review the asynchronous APIs of PostgreSQL and do some experiments.</p>


		
		<a href="/blog/2013/07/28/gsoc-status-week-6/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-07-28T00:22:00+08:00" pubdate data-updated="true">Jul 28<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>GSoC</a>, <a class='category' href='/blog/categories/monkey/'>Monkey</a>, <a class='category' href='/blog/categories/weekly-status/'>Weekly Status</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/07/21/gsoc-status-week-5/">
		
			GSoC Status: Week 5</a>
	</h2>
	<div class="entry-content">
		<p><img src="/images/blog/seal.png">
For the past a few days of this week, I was integrating the source code that required
to build libmysqlclient.a into MariaDB package. Meanwhile I added multiple statements
query support and connection pooling support to MariaDB package. All the features
in my proposal has been implemented and it is happy to announce this package is
coming near to its completion.</p>

<h2>integrate libmysqlclient.a</h2>

<p>It took a bit longer than I expected it would be as MariaDB is such a huge project
(totally 223MiB after extracting). I did spend some time to figure out the relation
of different subparts and picked up those that are really necessary for building
the static library.</p>

<p>The build tools used by MariaDB is <code>cmake</code>, I was not fimiliar with <code>cmake</code> so that
took me some other time to learn some basic usage. I have consulted from
<a href="https://kb.askmonty.org/en/compiling-mariadb-from-source/">blog series</a> of MariaDB
but it did not offer enough information. I turned to more comprehensive
<a href="http://dev.mysql.com/doc/refman/5.7/en/source-installation.html">documentation</a>,
although not all the options are available on MariaDB(such as <code>-DWITH_DEBUG</code>), it
did teach me how to use the same build options used by official MySQL release. (
with option <code>-DCMAKE_CONFIG=mysql_release</code>)</p>

<p>As there are so many build targets, I seeked help on irc #maria and some guy told
me to use <code>make mysqlclient</code> if all I wanted is the client library.</p>

<p>After I got all the missing pieces of the puzzle together, it finally worked out.
I have tested on two other Linux distribution to make sure it was not a pure
accident. :-D (Note: remember to install <code>cmake</code> and <code>libaio</code>)</p>


		
		<a href="/blog/2013/07/21/gsoc-status-week-5/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-07-21T19:50:00+08:00" pubdate data-updated="true">Jul 21<span>st</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>GSoC</a>, <a class='category' href='/blog/categories/monkey/'>Monkey</a>, <a class='category' href='/blog/categories/weekly-status/'>Weekly Status</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/07/14/gsoc-status-week-4/">
		
			GSoC Status: Week 4</a>
	</h2>
	<div class="entry-content">
		<p><img src="/images/blog/cool_monkey.png">
This week my time was mostly occupied by completing the MariaDB package. For now,
the basic version of MariaDB package is available, it can happily communicate
with the MariaDB server on my Linux box. I wrote a trivial duda web service to
test some common tasks when dealing with a relational database. During the
implementation and test I did encounter certain bugs, some are very obscure but
thank godness I finally fixed them. The current version is still not the final one,
some APIs may be altered in the future and new features will be introduced into
it. You can retrieve the code <a href="https://github.com/swpd/duda_mariadb">here</a> for
your own interest. :-D</p>

<p>During this week I also discussed some questions I was not sure about with the
guy who implemented the asynchronous APIs for MariaDB(known as knielsen on #maria).
He was nice and answered all my questions in detail. And my mentor, edsiper, who
was busy lately, gave me some advices on how to deal with the duda apis. I wanna
thanks both of them here!</p>

<p>Here are some tasks I will be working on for the next week:</p>

<ul>
<li>write documentation to explain the design and usage of the MariaDB package.</li>
<li>do some code cleanup and fix some potential bugs.</li>
<li>write a more comprehensive example for demonstrating How-To use MariaDB package.</li>
<li>do some survey and try to add connection pool support for the package to reduce
cost of connection setup and release.</li>
<li>add source code of <code>libmariadbclient</code> as a third party dependency because on some
Linux distribution this library may still not come with the asynchronous APIs.</li>
<li>add mutli-statement query support for the package.</li>
</ul>



		
		<a href="/blog/2013/07/14/gsoc-status-week-4/" class="more-link">Read on &rarr;</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-07-14T19:40:00+08:00" pubdate data-updated="true">Jul 14<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gsoc/'>GSoC</a>, <a class='category' href='/blog/categories/monkey/'>Monkey</a>, <a class='category' href='/blog/categories/weekly-status/'>Weekly Status</a>


</div>
	
</div></article>

<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner"><div>
    <a href="http://www.vim.org/">
        <img src="/images/vim_powered.gif" title="Powered by Vim" alt="Powered by Vim">
    </a>
    <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US">
        <img src="/images/cc.png" title="Creative Commons" alt="Creative Commons">
    </a>
</div>
Copyright &copy; 2013

    swpd

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'swpdtz';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-41181986-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>